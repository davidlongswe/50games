function getGames(a) { $.ajax({ url: "https://bgg-json.azurewebsites.net/hot", dataType: "jsonp", data: { limit: 50 }, success: function (e) { var n = [], i = 0, t = 0; a ? $.each(e, function () { n.push(`<article><h2>${e[i].rank}</h2><h2>${e[i].name}</h2><p>Publicerat: ${e[i].yearPublished} </p><img src=${e[i].thumbnail}></article>`), i++, t++ }) : (n = [], i = 0, t = 0, rank = 1, $.each(e, function () { e[i].yearPublished <= 2020 && (n.push(`<article><h2>${rank}</h2><h2>${e[i].name}</h2><p>Publicerat: ${e[i].yearPublished} </p><img src=${e[i].thumbnail}></article>`), t++, rank++), i++ })), $("#games").html(n.join("")), $("#noOfGames").html(t) } }) } $("#showAll").click(), $(document).ready(function () { $("#showAll").on("click", function () { getGames(!0) }), $("#onlyPublished").on("click", function () { getGames(!1) }), $("#showAll").click() });